project:
  name: "customer-segmentation-app"
  seed: 42

paths:
  input_path: "data/marketing_campaign.xlsx"
  output_dir: "outputs"
  use_timestamped_run_dir: true
  run_dir_prefix: "runs/run_"


run:
  save_tables: true
  save_plots: true
  show_plots: false   # keep false for production runs

data:
  datetime_col: "Dt_Customer"
  categorical_cols: ["Education", "Marital_Status"]
  id_col: "ID"

preprocessing:
  treat_income_zero_as_missing: true
  drop_id_if_zero: true
  drop_duplicates: true

  # IQR capping / winsorization
  iqr_cap_cols:
    - "Income"
    - "MntWines"
    - "MntFruits"
    - "MntMeatProducts"
    - "MntFishProducts"
    - "MntSweetProducts"
    - "MntGoldProds"
    - "NumWebPurchases"
    - "NumCatalogPurchases"
    - "NumWebVisitsMonth"

feature_engineering:
  age_min: 10
  age_max: 100

clustering:
  k: 4
  scaler: "RobustScaler"   # "StandardScaler" or "RobustScaler"
  kmeans:
    n_init: 10
    random_state: 42

personas:
  cluster_names:
    "0": "Budget-Conscious Families"
    "1": "High-Value Loyal Customers"
    "2": "Extreme / Outlier Customers"
    "3": "Regular Family Shoppers"

  cluster_personas:
    "0":
      Persona: "Budget-Conscious Families"
      Key_Traits: "Lower income, highest children count, low spend & frequency, store-heavy, deal-dependent"
      Business_Action: "Value packs, coupons, in-store promotions, discount-led messaging"
    "1":
      Persona: "High-Value Loyal Customers"
      Key_Traits: "Highest income, highest spend & frequency, high product variety, low deal dependency"
      Business_Action: "Premium offers, loyalty rewards, exclusives, avoid heavy discounts"
    "2":
      Persona: "Extreme / Outlier Customers"
      Key_Traits: "Very low income, near-zero purchases, extremely deal-dependent, tiny segment"
      Business_Action: "Exclude from core campaigns; handle separately if needed"
    "3":
      Persona: "Regular Family Shoppers"
      Key_Traits: "Mid income, moderate children, steady purchases, balanced channels, moderate promo sensitivity"
      Business_Action: "Bundles, seasonal campaigns, cross-sell, family-oriented messaging"

plots:
  cluster_counts_png: "cluster_counts.png"
  heatmap_png: "cluster_feature_heatmap.png"
  pca_html: "pca_3d.html"
  pca_centroids_html: "pca_3d_centroids.html"

api:
  require_api_key: true
  api_key_env: "CUSTOMER_SEG_API_KEY"
